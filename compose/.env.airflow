# ── DB & Celery
AIRFLOW__DATABASE__SQL_ALCHEMY_CONN=postgresql+psycopg2://hudius:hudius2020%21@postgres:5432/solar_db
AIRFLOW__CELERY__RESULT_BACKEND=db+postgresql://hudius:hudius2020%21@postgres:5432/solar_db
AIRFLOW__CELERY__BROKER_URL=redis://redis:6379/0
AIRFLOW__CORE__EXECUTOR=CeleryExecutor
AIRFLOW__CORE__LOAD_EXAMPLES=False

# ── Webserver: 서브패스(/airflow) & 프록시
AIRFLOW__WEBSERVER__BASE_URL=https://www.greenfesco.com/airflow
AIRFLOW__WEBSERVER__ENABLE_PROXY_FIX=True
AIRFLOW__WEBSERVER__COOKIE_SECURE=True
# (선택) 필요시
# AIRFLOW__WEBSERVER__SESSION_COOKIE_SAMESITE=Lax

# ── 보안(필수 권장)
AIRFLOW__CORE__FERNET_KEY=REPLACE_WITH_BASE64_32BYTES   # openssl rand -base64 32

# ── FAB OIDC (JSON 형태로 정확히!)
AIRFLOW__FAB__AUTH_TYPE=OAUTH
AIRFLOW__FAB__AUTH_USER_REGISTRATION=True
AIRFLOW__FAB__AUTH_USER_REGISTRATION_ROLE=User
AIRFLOW__FAB__OAUTH_PROVIDERS=[{"name":"keycloak","icon":"fa-key","token_key":"access_token","remote_app":{"client_id":"airflow","client_secret":"airflow-secret-key-2024","server_metadata_url":"http://keycloak:8080/realms/solar/.well-known/openid-configuration","client_kwargs":{"scope":"openid email profile"}}}]

# ── API 인증 (웹 로그인 세션 사용)
AIRFLOW__API__AUTH_BACKENDS=airflow.api.auth.backend.session
AIRFLOW__WEBSERVER__BASE_URL=https://www.greenfesco.com/airflow
AIRFLOW__WEBSERVER__ENABLE_PROXY_FIX=True

# ── 권한/경고 제거
AIRFLOW_UID=50000
AIRFLOW_GID=0

# ── (선택) 최초 1회 초기 관리자
_AIRFLOW_WWW_USER_CREATE=True
_AIRFLOW_WWW_USER_USERNAME=admin
_AIRFLOW_WWW_USER_PASSWORD=adminpw
_AIRFLOW_WWW_USER_FIRSTNAME=Admin
_AIRFLOW_WWW_USER_LASTNAME=User
_AIRFLOW_WWW_USER_EMAIL=hudius@hudius.com


FORWARDED_ALLOW_IPS=*
